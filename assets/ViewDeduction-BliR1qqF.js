import{r as a,A as j,j as e,N as H,F as n,a as h,S as $,H as f,l as x}from"./index-CxioH5k5.js";function F(){const[l,c]=a.useState(1),[o,d]=a.useState(3),[s,b]=a.useState([]),[p,v]=a.useState([]),[r,S]=a.useState("");a.useEffect(()=>{D()},[]);const D=async()=>{try{const t=await j.get("users");v(t.data.data.data)}catch(t){console.log(t)}},N=t=>{S(t.value)},_=p&&p.map(t=>({value:t.id,label:t.name})),k={container:t=>({...t,fontSize:"22px",minWidth:"200px",borderLeft:"5px solid green",borderRight:"5px solid green",borderTop:"2px solid gray",borderBottom:"2px solid gray",boxShadow:"none"}),menu:t=>({...t,fontSize:"19px",zIndex:9999}),menuList:t=>({...t,maxHeight:"200px",overflowY:"auto"})},[i,g]=a.useState(new Date),[m,y]=a.useState(new Date);function w(t){g(t)}function E(t){y(t)}const A=[{key:"amount",name:"المبلغ"},{key:"deduction_type",name:"السبب"},{key:"effective_date",name:"التاريخ"}],I=[{key:"deduction_amount",name:"المبلغ"},{key:"absence_type",name:"نوع الغياب "},{key:"absence_date",name:"التاريخ"}],L=[{key:"amount",name:"المبلغ"},{key:"note",name:"البيان"},{key:"date",name:"التاريخ"}],z=async t=>{try{await j.get(`employee/${r}/deductions?start_date=${i}&end_date=${m}`).then(u=>{b(u.data)})}catch(u){console.log(u)}},C=[{name:"عرض الخصومات",link:"#"}];return e.jsxs("div",{className:"container mt-2",children:[e.jsx(H,{nav:C}),e.jsxs("div",{className:"    w-100    fs-5 col-12 col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center gap-lg-4 align-items-center justify-content-center  flex-wrap",children:[e.jsxs(n.Group,{className:"d-flex  col-lg-5 col-md-6 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center  ",children:[e.jsx(n.Label,{className:"  col-6 col-lg-3 col-md-6 col-sm-4 m-0   ",children:" اختر موظف "}),e.jsx(h,{lg:9,sm:8,xs:12,md:12,children:e.jsx($,{options:_,value:r!=null?r.label:"اختر موظف ",name:"employeeId",onChange:N,placeholder:"اختر موظف ",styles:k,required:!0})})]}),e.jsxs(n.Group,{className:`d-flex  col-lg-5 col-md-6 col-sm-11  col-12  p-2\r
              flex-wrap align-items-center justify-content-center \r
                `,style:{zIndex:"1"},children:[e.jsx(n.Label,{className:"  col-6 col-lg-3 col-md-6 col-sm-4 m-0  ",children:"  من تاريخ "}),e.jsx(h,{lg:9,sm:8,xs:12,md:12,children:e.jsx(f,{name:"startDate",value:i,date:i,onChange:t=>g(t.target.value),setSelectDate:w})})]}),e.jsxs(n.Group,{style:{zIndex:"0"},className:"d-flex  col-lg-5 col-md-6 col-sm-11  col-12  p-2 flex-wrap align-items-center justify-content-center  ",children:[e.jsx(n.Label,{className:"  col-6 col-lg-3 col-md-6 col-sm-4 m-0  ",children:"  الى تاريخ "}),e.jsx(h,{lg:9,sm:8,xs:12,md:12,children:e.jsx(f,{name:"endDate",value:m,date:m,onChange:t=>y(t.target.value),setSelectDate:E})})]})]}),e.jsx("button",{className:"   px-4 py-2 rounded mb-2",onClick:z,children:"بحث"}),s.deductions&&s.deductions.length>0?e.jsxs("div",{className:"mt-0   p-2 ",style:{},children:[e.jsx("h3",{children:"الخصومات"}),e.jsx(x,{limit:o,setLimit:d,page:l,header:A,data:s.deductions,setPage:c,loading:!1,edit:"users",total:"0",search:"name",role:""}),e.jsxs("h3",{className:"mt-3 mb-3",children:["اجمالي الخصومات :",s.totalDeductions?s.totalDeductions:0]})]}):e.jsx("h3",{children:"لا توجد استقطاعات من المرتب"}),s.absences&&s.absences.length>0?e.jsxs("div",{className:"mt-0   p-2 ",style:{},children:[e.jsx("h3",{children:" خصومات الغياب"}),e.jsx(x,{limit:o,setLimit:d,page:l,header:I,data:s.absences,setPage:c,loading:!1,edit:"users",total:0,search:"name",role:""}),e.jsxs("h3",{className:"mt-3 mb-3",children:["اجمالي خصومات الغياب:",s.totalAbsences?s.totalAbsences:0]})]}):e.jsx("h3",{children:"لا توجد خصومات غياب "}),s.advance_deductions&&s.advance_deductions.length>0?e.jsxs("div",{className:"mt-0   p-2 ",style:{},children:[e.jsx("h3",{children:" خصومات السلف"}),e.jsx(x,{limit:o,setLimit:d,page:l,header:L,data:s.advance_deductions,setPage:c,loading:!1,edit:"users",total:0,search:"name",role:""}),e.jsxs("h3",{className:"mt-3 mb-3",children:["اجمالي خصومات السلف:",s.totalAdvanceDeductions?s.totalAdvanceDeductions:0]})]}):e.jsx("h3",{children:"لا توجد  سلف   "})]})}export{F as default};
