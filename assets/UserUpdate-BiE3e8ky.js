import{u as K,r as o,j as e,e as f,F as l,a as n,H as k,S as y,v as R,A as g,n as D}from"./index-CxioH5k5.js";import{c as _}from"./customStylesSelect-DhMH63Ix.js";function X(){const{id:h}=K(),[m,$]=o.useState(""),[r,q]=o.useState(""),[b,F]=o.useState([]),[j,N]=o.useState(""),[u,w]=o.useState(""),[i,z]=o.useState([]),[v,A]=o.useState([]),[C,E]=o.useState([]);o.useEffect(()=>{async function s(){try{await g.get("roles").then(a=>E(a.data))}catch(a){console.log(a)}}s()},[]);const U=C&&C.map(s=>({value:s.id,label:s.name})),[t,p]=o.useState({name:"",email:"",telegram_chat_id:"",salary:"",phone_number:"",national_id:"",job_title:"",gender:"",nationality:"",department_id:"",role:"",role_id:"",employment_type:"",password:"",status:" "});async function V(){try{await g.get("departments").then(s=>F(s.data))}catch(s){console.log(s)}}const H=b&&b.map(s=>({value:s.id,label:s.department_name}));o.useEffect(()=>{async function s(){try{await g.get(`/${D}/${h}`).then(a=>{const d=a.data[0].nationality,x=a.data[0].department,G=a.data[0].role_id,J=a.data[0].role;A(JSON.parse(a.data[0].file_paths)),p({name:a.data[0].name||"",email:a.data[0].email||"",telegram_chat_id:a.data[0].telegram_chat_id||"",salary:a.data[0].salary||"",phone_number:a.data[0].phone_number||"",national_id:a.data[0].national_id||"",job_title:a.data[0].job_title||"",gender:a.data[0].gender||"",nationality:d?{value:d,label:d}:"",department_id:x?{value:x.id,label:x.department_name}:"",role:G?{value:G,label:J}:"",role_id:a.data[0].role_id||"",employment_type:a.data[0].employment_type||"",password:a.data[0].password||"",status:a.data[0].status||""}),N(new Date(a.data[0].birth_date)),w(new Date(a.data[0].hire_date))})}catch(a){console.log(a)}}s(),V()},[h]);function c(s){p({...t,[s.target.name]:s.target.value})}const L=o.useRef(null),S=["اليمن","المملكة العربية السعودية","عمان","قطر","السودان","مصر","المغرب","لبنان","فلسطين","الامارات","سورياء","الاردن","ليبيا","الصومال","الجزائر","العراق","البحرين"],O=S&&S.map(s=>({value:s,label:s}));function P(s){N(s)}function I(s){w(s)}function M(s){z([...s.target.files])}function T(){L.current.click()}async function B(s){s.preventDefault();const a=new FormData;a.append("name",t.name),a.append("email",t.email),a.append("telegram_chat_id",t.telegram_chat_id),a.append("salary",t.salary),a.append("password",t.password),a.append("phone_number",t.phone_number),a.append("national_id",t.national_id),a.append("birth_date",j),a.append("hire_date",u),a.append("job_title",t.job_title),a.append("gender",t.gender),a.append("nationality",t.nationality.value),a.append("department_id",t.department_id.value),a.append("role",t.role.label),a.append("role_id",t.role.value),a.append("employment_type",t.employment_type),a.append("status",t.status),a.append("files[]",i[0]);try{await g.post(`${D}/edit/${h}`,a),window.location.pathname="/dashboard/users"}catch(d){console.log(d.response.data.message),q(d.response.data.message)}}return e.jsx("div",{className:"w-100  border  border-primary   col-12 col-lg-12 col-md-12 col-sm-12  ",style:{},children:e.jsxs("div",{className:"w-100 d-flex  col-12 col-lg-12 col-md-12 col-sm-12   flex-column  ",children:[e.jsxs("div",{className:"d-flex    w-75   fs-3     text-center align-items-center justify-content-center gap-5 ",style:{height:"50px"},children:[e.jsx(f,{to:"/dashboard/users",className:"link m-0  ",children:"رجوع"}),e.jsx(f,{to:"/dashboard/users",className:"link m-0  ",children:"عرض كل الموظفين"})]}),e.jsxs("div",{className:"  mt-3  w-100    fs-5 col-12 col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center gap-lg-4 align-items-center justify-content-center  flex-wrap",children:[e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-3",children:"الاسم"}),e.jsx(n,{lg:9,sm:8,xs:12,md:12,children:e.jsx(l.Control,{className:"p-2",type:"text",name:"name",value:t.name,onChange:c})})]}),e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8",children:" البريد الالكتروني"}),e.jsx(n,{lg:9,sm:8,xs:12,md:12,children:e.jsx(l.Control,{className:"p-2",type:"email",name:"email",value:t.email,onChange:c})}),r.includes("The email has already been taken.")&&e.jsx("p",{className:"text-danger m-0",style:{fontSize:"13px"},children:"الايميل هذا مسجل من قبل"})]})]}),e.jsxs("div",{className:"    w-100    fs-5 col-12 col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center gap-lg-4 align-items-center justify-content-center  flex-wrap",children:[e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8",children:"telegram_id"}),e.jsx(n,{lg:9,sm:8,xs:12,md:12,children:e.jsx(l.Control,{className:"p-2",type:"number",name:"telegram_chat_id",value:t.telegram_chat_id,onChange:c})})]}),e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12  p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8",children:"رقم الهاتف"}),e.jsx(n,{lg:9,sm:8,xs:12,md:12,children:e.jsx(l.Control,{className:"p-2",type:"number",name:"phone_number",value:t.phone_number,onChange:c})})]})]}),e.jsxs("div",{className:"    w-100       fs-5 col-12 col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center gap-lg-4 align-items-center justify-content-center  flex-wrap",children:[e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8  ",children:"رقم الهوية الوطنية "}),e.jsxs(n,{lg:9,sm:8,xs:12,md:12,children:[e.jsx(l.Control,{className:"p-2",type:"number",name:"national_id",value:t.national_id,onChange:c}),r.length>0&&t.national_id===""&&e.jsx("p",{className:"text-danger m-0",style:{fontSize:"13px"},children:" ادخل الرقم الوطني"})]})]}),e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12  p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8",children:"المسمى الوظيفي"}),e.jsxs(n,{lg:9,sm:8,xs:12,md:12,children:[e.jsx(l.Control,{className:"p-2",type:"text",name:"job_title",value:t.job_title,onChange:c}),r.length>0&&t.job_title===""&&e.jsx("p",{className:"text-danger m-0",style:{fontSize:"13px"},children:"Required"})]})]})]}),e.jsxs("div",{className:"    w-100    fs-5 col-12 col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center gap-lg-4 align-items-center justify-content-center  flex-wrap",children:[e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12  p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8",children:" تاريخ الميلاد"}),e.jsx(n,{lg:9,sm:8,xs:12,md:12,children:j&&e.jsx(k,{name:"birth_date",date:j,setSelectDate:P})})]}),e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12  p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8",children:" تاريخ التوظيف"}),e.jsx(n,{lg:9,sm:8,xs:12,md:12,children:u&&e.jsx(k,{date:u,setSelectDate:I})})]})]}),e.jsxs("div",{className:"    w-100    fs-5 col-12 col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center gap-lg-4 align-items-center justify-content-center  flex-wrap",children:[e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-3",children:" الجنسية "}),e.jsxs(n,{lg:9,sm:8,xs:12,md:12,children:[e.jsx(y,{className:"w-100   ",name:"nationality",value:t.nationality,onChange:s=>p({...t,nationality:s}),options:O,placeholder:"اختر البلد ",styles:_,required:!0}),r.length>0&&t.nationality===""&&e.jsx("p",{className:"text-danger m-0",style:{fontSize:"13px"},children:"Required"})]})]}),e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-3",children:" القسم "}),e.jsxs(n,{lg:9,sm:8,xs:12,md:12,children:[e.jsx(y,{className:"w-100   ",name:"department_id",options:H,placeholder:"اختر القسم ",value:t.department_id,onChange:s=>p({...t,department_id:s}),styles:_,required:!0}),r.length>0&&t.department_id===""&&e.jsx("p",{className:"text-danger m-0",style:{fontSize:"13px"},children:"Required"})]})]})]}),e.jsxs("div",{className:"    w-100    fs-5 col-12 col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center gap-lg-4 align-items-center justify-content-center  flex-wrap",children:[e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-3",children:" الجنس "}),e.jsx(n,{lg:9,sm:8,xs:7,md:12,children:e.jsx("fieldset",{children:e.jsxs(l.Group,{className:"mt-3 d-flex gap-3",style:{textAlign:"right"},children:[e.jsx(l.Check,{type:"radio",name:"gender",value:"ذكر",checked:t.gender==="ذكر",onChange:c}),e.jsx(l.Label,{children:" ذكر "}),e.jsx(l.Check,{type:"radio",name:"gender",value:"انثى",checked:t.gender==="انثى",onChange:c}),e.jsx(l.Label,{children:" انثى "})]})})})]}),e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-3",children:" نوع العمل "}),e.jsx(n,{lg:9,sm:8,xs:7,md:12,children:e.jsx("fieldset",{children:e.jsxs(l.Group,{className:"mt-3 d-flex gap-3",style:{textAlign:"right"},children:[e.jsx(l.Check,{type:"radio",name:"employment_type",value:"دوام كامل",checked:t.employment_type==="دوام كامل",onChange:c}),e.jsx(l.Label,{children:" كامل "}),e.jsx(l.Check,{type:"radio",name:"employment_type",value:"دوام جزئي",checked:t.employment_type==="دوام جزئي",onChange:c}),e.jsx(l.Label,{children:" جزئي "}),e.jsx(l.Check,{type:"radio",name:"employment_type",value:"تعاقد",checked:t.employment_type==="تعاقد",onChange:c}),e.jsx(l.Label,{children:" تعاقد "})]})})})]})]}),e.jsxs("div",{className:"    w-100    fs-5 col-12 col-lg-12  gap-3 col-md-12 col-sm-12 d-flex justify-content-center gap-lg-4 align-items-center justify-content-center  flex-wrap",children:[e.jsxs(l.Group,{className:"d-flex  col-lg-11 col-md-10 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-2 col-md-2 col-sm-4 m-0 col-md-8 ",children:" صلاحية المستخدم "}),e.jsx(n,{lg:9,sm:8,xs:12,md:9,children:e.jsx(y,{className:"w-100   ",name:"role",required:!0,value:t.role,onChange:s=>p({...t,role:s}),options:U,styles:_})})]}),e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8  ",children:"المرتب"}),e.jsx(n,{lg:9,sm:8,xs:12,md:12,children:e.jsx(l.Control,{className:"p-2",type:"number",name:"salary",value:t.salary,onChange:c})})]})]}),e.jsxs("div",{className:"    w-100    fs-5 col-12 col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center gap-lg-4 align-items-center justify-content-center  flex-wrap",children:[e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8 ",children:" كلمة المرور "}),e.jsxs(n,{lg:9,sm:8,xs:12,md:12,children:[e.jsx(l.Control,{type:"password",name:"password",placeholder:"At least 6 charecter",value:t.password,onChange:c}),r.includes("The password field is required.")&&e.jsx("p",{className:"text-danger m-0",style:{fontSize:"13px"},children:"يرجى ادخال كلمة مرور من 6 ارقام فاكثر"})]})]}),e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8 ",children:"تأكيد كلمة المرور "}),e.jsx(n,{lg:9,sm:8,xs:12,md:12,style:{borderBottom:m.length===0?"":t.password===m&&m.length>=6?"4px solid green":"4px solid red"},children:e.jsx(l.Control,{type:"password",name:"confirmPassword",value:m,placeholder:"At least 6 charecter",onChange:s=>$(s.target.value)})})]})]}),e.jsxs("div",{className:"    w-100    fs-5 col-12 col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center flex-column gap-lg-4 align-items-center justify-content-center  flex-wrap",children:[e.jsx(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12    flex-wrap align-items-center justify-content-center",children:e.jsx(n,{lg:9,sm:8,xs:12,md:12,children:e.jsx(l.Control,{type:"file",hidden:!0,onChange:M,ref:L})})}),e.jsx("p",{className:"m-0 fs-5",children:" اختر الصورة الشخصية"}),e.jsxs("div",{className:"border bg-light p-3 mb-4",onClick:T,style:{width:"200px",height:"200px",cursor:"pointer"},children:[i[0]&&e.jsx("div",{className:"  position-relative mt-2   ",children:R.map((s,a)=>e.jsx("div",{children:s.src_type===i[0].type&&e.jsx("div",{className:"d-flex align-items-center justify-content-start flex-column ",children:e.jsx("img",{src:s.type==="img"?`${URL.createObjectURL(i[0])}`:` ${s.pathimg}`,style:{width:"100%",height:"180px"},alt:""})})},a))}),e.jsx("div",{children:i.length===0&&e.jsx("div",{className:"     w-100 p-2    ",style:{cursor:"pointer"},children:v&&v.map((s,a)=>e.jsx("div",{className:" ",children:R.map((d,x)=>e.jsx("div",{children:d.name.includes(s.split(".").pop())&&e.jsx("div",{children:e.jsx("img",{src:d.type==="img"?` ${d.pathimg}/${s}`:` ${d.pathimg}`,style:{width:"90%"},alt:"img"})})},x))},a))})})]})]}),e.jsxs("div",{className:"w-100 border text-center gap-4",children:[e.jsx("button",{className:"btn btn-primary m-3",onClick:B,disabled:m!==t.password,children:"حفظ"}),e.jsx("button",{className:"btn btn-primary",children:e.jsx(f,{to:"/dashboard",children:"إلغاء"})})]})]})})}export{X as default};
