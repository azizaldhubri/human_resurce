import{r as i,q as O,t as A,A as g,j as e,e as _,F as l,a as o,H as w,S as u,U as F}from"./index-CxioH5k5.js";import{c as h}from"./customStylesSelect-DhMH63Ix.js";const P={form:{name:"",email:"",telegram_chat_id:"",salary:"",phone_number:"",national_id:"",job_title:"",gender:"ذكر",nationality:null,department_id:null,role:null,employment_type:"دوام كامل",password:"",status:"نشط"},confirmPassword:"",message:"",files:[],departments:[],roles:[],birth_date:new Date,hire_date:new Date};function U(n,a){switch(a.type){case"SET_INPUT":return{...n,form:{...n.form,[a.name]:a.value}};case"SET_SELECT":return{...n,form:{...n.form,[a.name]:a.value}};case"SET_FILE":return{...n,files:a.payload};case"SET_MESSAGE":return{...n,message:a.payload};case"SET_DEPARTMENTS":return{...n,departments:a.payload};case"SET_ROLES":return{...n,roles:a.payload};case"SET_BIRTH":return{...n,birth_date:a.payload};case"SET_HIRE":return{...n,hire_date:a.payload};case"SET_CONFIRM":return{...n,confirmPassword:a.payload};default:return n}}function $(){const[n,a]=i.useReducer(U,P),{form:c,files:d,message:f,departments:v,roles:E,birth_date:j,hire_date:y,confirmPassword:N}=n,S=O(),C=i.useContext(A),b=i.useRef(null);i.useEffect(()=>{T(),L()},[]);async function T(){const s=await g.get("departments");a({type:"SET_DEPARTMENTS",payload:s.data})}async function L(){const s=await g.get("roles");a({type:"SET_ROLES",payload:s.data})}const t=s=>a({type:"SET_INPUT",name:s.target.name,value:s.target.value}),p=(s,r)=>a({type:"SET_SELECT",name:s,value:r}),G=s=>a({type:"SET_FILE",payload:[...s.target.files]});async function R(s){if(s.preventDefault(),c.password!==N){a({type:"SET_MESSAGE",payload:"كلمة المرور غير متطابقة"});return}const r=new FormData,M={...c,birth_date:j,hire_date:y,nationality:c.nationality?.value,department_id:c.department_id?.value,role:c.role?.label,role_id:c.role?.value,admin:"1"};Object.entries(M).forEach(([m,x])=>{x!=null&&r.append(m,x)}),d.length>0&&r.append("files[]",d[0]);try{await g.post(`${F}/add`,r),C.setIsupdateNotifaction(m=>!m),S("/dashboard/users")}catch(m){a({type:"SET_MESSAGE",payload:m.response?.data?.message||"حدث خطأ"})}}const k=v.map(s=>({value:s.id,label:s.department_name})),I=E.map(s=>({value:s.id,label:s.name})),D=["اليمن","السعودية","مصر","عمان","الامارات","قطر"].map(s=>({value:s,label:s}));return e.jsxs("div",{className:"container mt-4",children:[e.jsxs("div",{className:"d-flex justify-content-between mb-4",children:[e.jsx(_,{to:"/dashboard",children:"رجوع"}),e.jsx(_,{to:"/dashboard/users",children:"عرض كل الموظفين"})]}),f&&e.jsx("p",{className:"text-danger text-center",children:f}),e.jsx("div",{className:"w-100 d-flex  col-12 col-lg-12 col-md-12 col-sm-12   flex-column border-0 border-top    ",children:e.jsxs(l,{onSubmit:R,children:[e.jsxs("div",{className:"  mt-3  w-100    fs-5 col-12 col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center gap-lg-4 align-items-center justify-content-center  flex-wrap",children:[e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-3",children:"الاسم"}),e.jsx(o,{lg:9,sm:8,xs:12,md:12,children:e.jsx(l.Control,{className:"p-2",name:"name",value:c.name,onChange:t})})]}),e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8",children:" البريد الالكتروني"}),e.jsx(o,{lg:9,sm:8,xs:12,md:12,children:e.jsx(l.Control,{className:"p-2",type:"email",name:"email",value:c.email,onChange:t})})]})]}),e.jsxs("div",{className:"    w-100    fs-5 col-12 col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center gap-lg-4 align-items-center justify-content-center  flex-wrap",children:[e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center ",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8",children:"telegram id"}),e.jsx(o,{lg:9,sm:8,xs:12,md:12,children:e.jsx(l.Control,{className:"p-2",type:"number",name:"telegram_chat_id",value:c.telegram_chat_id,onChange:t})})]}),e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12  p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8",children:"رقم الهاتف"}),e.jsx(o,{lg:9,sm:8,xs:12,md:12,children:e.jsx(l.Control,{className:"p-2",type:"number",name:"phone_number",value:c.phone_number,onChange:t})})]})]}),e.jsxs("div",{className:"  mt-3  w-100    fs-5 col-12 col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center gap-lg-4 align-items-center justify-content-center  flex-wrap",children:[e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8  ",children:"رقم الهوية الوطنية "}),e.jsx(o,{lg:9,sm:8,xs:12,md:12,children:e.jsx(l.Control,{className:"p-2",type:"number",name:"national_id",value:c.national_id,onChange:t})})]}),e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12  p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8",children:"المسمى الوظيفي"}),e.jsx(o,{lg:9,sm:8,xs:12,md:12,children:e.jsx(l.Control,{className:"p-2",name:"job_title",value:c.job_title,onChange:t})})]})]}),e.jsxs("div",{className:"  mt-3  w-100    fs-5 col-12 col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center gap-lg-4 align-items-center  flex-wrap",children:[e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12  p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8",children:" تاريخ الميلاد"}),e.jsx(o,{lg:9,sm:8,xs:12,md:12,children:e.jsx(w,{date:j,setSelectDate:s=>a({type:"SET_BIRTH",payload:s})})})]}),e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12  p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-8",children:" تاريخ التوظيف"}),e.jsx(o,{lg:9,sm:8,xs:12,md:12,children:e.jsx(w,{date:y,setSelectDate:s=>a({type:"SET_HIRE",payload:s})})})]})]}),e.jsxs("div",{className:"  mt-3  w-100    fs-5 col-12 col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center align-items-center flex-wrap gap-lg-4 ",children:[e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-3",children:"الجنسية"}),e.jsx(o,{lg:9,sm:8,xs:12,md:12,children:e.jsx(u,{options:D,value:c.nationality,onChange:s=>p("nationality",s),styles:h})})]}),e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3 col-md-4 col-sm-4 m-0 col-md-3",children:" القسم "}),e.jsx(o,{lg:9,sm:8,xs:12,md:12,children:e.jsx(u,{options:k,value:c.department_id,onChange:s=>p("department_id",s),styles:h})})]})]}),e.jsxs("div",{className:"  mt-3  w-100    fs-5 col-12 col-lg-12  gap-3 col-md-12 col-sm-12 d-flex   gap-lg-4 align-items-center justify-content-center  flex-wrap   ",children:[e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2 flex-wrap align-items-center justify-content-center  ",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3   col-sm-4 m-0 col-md-8 ",children:" صلاحية المستخدم "}),e.jsx(o,{lg:9,sm:8,xs:12,md:12,children:e.jsx(u,{options:I,value:c.role,onChange:s=>p("role",s),styles:h})})]}),e.jsxs(l.Group,{className:"d-flex  col-lg-5 col-md-5 col-sm-11  col-12   p-2  align-items-center justify-content-center flex-wrap",children:[e.jsx(l.Label,{className:"  col-6 col-lg-3   col-sm-4 m-0 col-md-4   ",children:"المرتب"}),e.jsx(o,{lg:9,sm:8,xs:12,md:12,children:e.jsx(l.Control,{className:"p-2",type:"number",name:"salary",value:c.salary,onChange:t})})]})]}),e.jsxs("div",{className:"w-100 d-flex justify-content-center gap-4 flex-wrap fs-4",children:[e.jsxs(l.Group,{className:"col-lg-5 col-md-5 col-sm-11 col-12 p-2 ",children:[e.jsx(l.Label,{children:"الجنس"}),e.jsxs("div",{className:"d-flex gap-3 mt-2",children:[e.jsx(l.Check,{type:"radio",name:"gender",value:"ذكر",label:"ذكر",checked:c.gender==="ذكر",onChange:t}),e.jsx(l.Check,{type:"radio",name:"gender",value:"انثى",label:"انثى",checked:c.gender==="انثى",onChange:t})]})]}),e.jsxs(l.Group,{className:"col-lg-5 col-md-5 col-sm-11 col-12 p-2",children:[e.jsx(l.Label,{children:"نوع العمل"}),e.jsxs("div",{className:"d-flex gap-3 mt-2",children:[e.jsx(l.Check,{type:"radio",name:"employment_type",value:"دوام كامل",label:"كامل",checked:c.employment_type==="دوام كامل",onChange:t}),e.jsx(l.Check,{type:"radio",name:"employment_type",value:"دوام جزئي",label:"جزئي",checked:c.employment_type==="دوام جزئي",onChange:t}),e.jsx(l.Check,{type:"radio",name:"employment_type",value:"تعاقد",label:"تعاقد",checked:c.employment_type==="تعاقد",onChange:t})]})]})]}),e.jsxs("div",{className:"  mt-3  w-100    fs-5 col-12 col-lg-12 col-md-12 col-sm-12 d-flex justify-content-center gap-lg-4 align-items-center  flex-wrap",children:[e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"كلمة المرور"}),e.jsx(l.Control,{type:"password",name:"password",value:c.password,onChange:t})]}),e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"تأكيد كلمة المرور"}),e.jsx(l.Control,{type:"password",value:N,onChange:s=>a({type:"SET_CONFIRM",payload:s.target.value})})]})]}),e.jsx(l.Control,{type:"file",hidden:!0,ref:b,onChange:G}),e.jsx("div",{className:"border p-3 text-center mb-3 fs-5",style:{cursor:"pointer"},onClick:()=>b.current.click(),children:d[0]?e.jsx("img",{src:URL.createObjectURL(d[0]),width:"150",alt:""}):"اختر صورة"}),e.jsx("button",{className:"btn btn-primary w-100 mb-3",children:"حفظ"})]})})]})}export{$ as default};
